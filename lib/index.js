!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.nodeLayout=n():t.nodeLayout=n()}(self,(function(){return(()=>{"use strict";var t={342:(t,n,e)=>{e.d(n,{Z:()=>u});var r=e(81),i=e.n(r),o=e(645),a=e.n(o)()(i());a.push([t.id,'.nodelayout-wrap {\n  border: 1px solid #ddd;\n  background: #fff;\n  border-radius: 5px;\n  width: 100%;\n}\n@keyframes marchingants {\n  to {\n    stroke-dashoffset: 19;\n  }\n}\n.nodelayout-wrap svg .small-circle {\n  opacity: 0;\n  fill: #fff;\n  stroke: #08c;\n}\n.nodelayout-wrap svg g.unit-dis {\n  stroke-width: 1px;\n}\n.nodelayout-wrap svg g.unit-dis.selected {\n  stroke-dasharray: 5;\n}\n.nodelayout-wrap svg g.unit-dis.selected .small-circle {\n  opacity: 1;\n}\n.nodelayout-wrap svg g.unit-dis.selected .delete-circle {\n  opacity: 1;\n}\n.nodelayout-wrap svg g.unit-dis.selected rect {\n  animation: marchingants 1s forwards infinite linear;\n  stroke-width: 2px;\n}\n.nodelayout-wrap svg g.unit-dis:hover .small-circle {\n  opacity: 1;\n}\n.nodelayout-wrap svg g.unit-dis .main-circle {\n  cursor: move;\n}\n.nodelayout-wrap svg .connect-line {\n  opacity: 0;\n  stroke: #111;\n  fill: none;\n  stroke-width: 2px;\n}\n.nodelayout-wrap svg .connect-line.show {\n  opacity: 1;\n}\n.nodelayout-wrap svg .delete-circle {\n  cursor: pointer;\n  opacity: 0;\n}\n.nodelayout-wrap svg .connect-fixed-line {\n  stroke: #111;\n  stroke-width: 2px;\n}\n.nodelayout-wrap svg .connect-fixed-line[data-selected="true"] {\n  stroke-dasharray: 5;\n  animation: marchingants 1s reverse forwards infinite linear;\n}\n.nodelayout-wrap .svg-option-list {\n  height: 100px;\n  padding: 0 10px;\n  background: #fff;\n}\n.nodelayout-wrap .svg-option-list .svg-option-list-li {\n  display: inline-block;\n  padding: 20px 35px;\n  text-align: center;\n}\n',""]);const u=a},645:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e="",r=void 0!==n[5];return n[4]&&(e+="@supports (".concat(n[4],") {")),n[2]&&(e+="@media ".concat(n[2]," {")),r&&(e+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),e+=t(n),r&&(e+="}"),n[2]&&(e+="}"),n[4]&&(e+="}"),e})).join("")},n.i=function(t,e,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var u=0;u<this.length;u++){var s=this[u][0];null!=s&&(a[s]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&a[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),e&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=e):l[2]=e),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),n.push(l))}},n}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var n=[];function e(t){for(var e=-1,r=0;r<n.length;r++)if(n[r].identifier===t){e=r;break}return e}function r(t,r){for(var o={},a=[],u=0;u<t.length;u++){var s=t[u],c=r.base?s[0]+r.base:s[0],l=o[c]||0,h="".concat(c," ").concat(l);o[c]=l+1;var f=e(h),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)n[f].references++,n[f].updater(p);else{var d=i(p,r);r.byIndex=u,n.splice(u,0,{identifier:h,updater:d,references:1})}a.push(h)}return a}function i(t,n){var e=n.domAPI(n);return e.update(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap&&n.supports===t.supports&&n.layer===t.layer)return;e.update(t=n)}else e.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var u=e(o[a]);n[u].references--}for(var s=r(t,i),c=0;c<o.length;c++){var l=e(o[c]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}o=s}}},569:t=>{var n={};t.exports=function(t,e){var r=function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}},216:t=>{t.exports=function(t){var n=document.createElement("style");return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},565:(t,n,e)=>{t.exports=function(t){var n=e.nc;n&&t.setAttribute("nonce",n)}},795:t=>{t.exports=function(t){var n=t.insertStyleElement(t);return{update:function(e){!function(t,n,e){var r="";e.supports&&(r+="@supports (".concat(e.supports,") {")),e.media&&(r+="@media ".concat(e.media," {"));var i=void 0!==e.layer;i&&(r+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),r+=e.css,i&&(r+="}"),e.media&&(r+="}"),e.supports&&(r+="}");var o=e.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(r,t,n.options)}(n,t,e)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)}}}},589:t=>{t.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}}},n={};function e(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={id:r,exports:{}};return t[r](o,o.exports,e),o.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{function t(){}function n(n){return null==n?t:function(){return this.querySelector(n)}}function i(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function o(){return[]}function a(t){return null==t?o:function(){return this.querySelectorAll(t)}}function u(t){return function(){return this.matches(t)}}function s(t){return function(n){return n.matches(t)}}e.r(r),e.d(r,{add:()=>Or,init:()=>jr});var c=Array.prototype.find;function l(){return this.firstElementChild}var h=Array.prototype.filter;function f(){return Array.from(this.children)}function p(t){return new Array(t.length)}function d(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function y(t){return function(){return t}}function v(t,n,e,r,i,o){for(var a,u=0,s=n.length,c=o.length;u<c;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new d(t,o[u]);for(;u<s;++u)(a=n[u])&&(i[u]=a)}function m(t,n,e,r,i,o,a){var u,s,c,l=new Map,h=n.length,f=o.length,p=new Array(h);for(u=0;u<h;++u)(s=n[u])&&(p[u]=c=a.call(s,s.__data__,u,n)+"",l.has(c)?i[u]=s:l.set(c,s));for(u=0;u<f;++u)c=a.call(t,o[u],u,o)+"",(s=l.get(c))?(r[u]=s,s.__data__=o[u],l.delete(c)):e[u]=new d(t,o[u]);for(u=0;u<h;++u)(s=n[u])&&l.get(p[u])===s&&(i[u]=s)}function g(t){return t.__data__}function w(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function _(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}d.prototype={constructor:d,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var x="http://www.w3.org/1999/xhtml";const b={svg:"http://www.w3.org/2000/svg",xhtml:x,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function k(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),b.hasOwnProperty(n)?{space:b[n],local:t}:t}function M(t){return function(){this.removeAttribute(t)}}function A(t){return function(){this.removeAttributeNS(t.space,t.local)}}function E(t,n){return function(){this.setAttribute(t,n)}}function N(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function S(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function $(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function z(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function T(t){return function(){this.style.removeProperty(t)}}function P(t,n,e){return function(){this.style.setProperty(t,n,e)}}function C(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function I(t,n){return t.style.getPropertyValue(n)||z(t).getComputedStyle(t,null).getPropertyValue(n)}function L(t){return function(){delete this[t]}}function X(t,n){return function(){this[t]=n}}function q(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function Y(t){return t.trim().split(/^|\s+/)}function j(t){return t.classList||new O(t)}function O(t){this._node=t,this._names=Y(t.getAttribute("class")||"")}function R(t,n){for(var e=j(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function B(t,n){for(var e=j(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function D(t){return function(){R(this,t)}}function V(t){return function(){B(this,t)}}function H(t,n){return function(){(n.apply(this,arguments)?R:B)(this,t)}}function U(){this.textContent=""}function Z(t){return function(){this.textContent=t}}function F(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function W(){this.innerHTML=""}function G(t){return function(){this.innerHTML=t}}function K(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function Q(){this.nextSibling&&this.parentNode.appendChild(this)}function J(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tt(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===x&&n.documentElement.namespaceURI===x?n.createElement(t):n.createElementNS(e,t)}}function nt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function et(t){var n=k(t);return(n.local?nt:tt)(n)}function rt(){return null}function it(){var t=this.parentNode;t&&t.removeChild(this)}function ot(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function at(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ut(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function st(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function ct(t,n,e){return function(){var r,i=this.__on,o=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(i)for(var a=0,u=i.length;a<u;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),void(r.value=n);this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function lt(t,n,e){var r=z(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function ht(t,n){return function(){return lt(this,t,n)}}function ft(t,n){return function(){return lt(this,t,n.apply(this,arguments))}}O.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var pt=[null];function dt(t,n){this._groups=t,this._parents=n}function yt(){return new dt([[document.documentElement]],pt)}dt.prototype=yt.prototype={constructor:dt,select:function(t){"function"!=typeof t&&(t=n(t));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var a,u,s=e[o],c=s.length,l=i[o]=new Array(c),h=0;h<c;++h)(a=s[h])&&(u=t.call(a,a.__data__,h,s))&&("__data__"in a&&(u.__data__=a.__data__),l[h]=u);return new dt(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return i(t.apply(this,arguments))}}(t):a(t);for(var n=this._groups,e=n.length,r=[],o=[],u=0;u<e;++u)for(var s,c=n[u],l=c.length,h=0;h<l;++h)(s=c[h])&&(r.push(t.call(s,s.__data__,h,c)),o.push(s));return new dt(r,o)},selectChild:function(t){return this.select(null==t?l:function(t){return function(){return c.call(this.children,t)}}("function"==typeof t?t:s(t)))},selectChildren:function(t){return this.selectAll(null==t?f:function(t){return function(){return h.call(this.children,t)}}("function"==typeof t?t:s(t)))},filter:function(t){"function"!=typeof t&&(t=u(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&c.push(o);return new dt(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,g);var e=n?m:v,r=this._parents,i=this._groups;"function"!=typeof t&&(t=y(t));for(var o=i.length,a=new Array(o),u=new Array(o),s=new Array(o),c=0;c<o;++c){var l=r[c],h=i[c],f=h.length,p=w(t.call(l,l&&l.__data__,c,r)),d=p.length,_=u[c]=new Array(d),x=a[c]=new Array(d),b=s[c]=new Array(f);e(l,h,_,x,b,p,n);for(var k,M,A=0,E=0;A<d;++A)if(k=_[A]){for(A>=E&&(E=A+1);!(M=x[E])&&++E<d;);k._next=M||null}}return(a=new dt(a,r))._enter=u,a._exit=s,a},enter:function(){return new dt(this._enter||this._groups.map(p),this._parents)},exit:function(){return new dt(this._exit||this._groups.map(p),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(i=n(i))&&(i=i.selection()),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),u=new Array(i),s=0;s<a;++s)for(var c,l=e[s],h=r[s],f=l.length,p=u[s]=new Array(f),d=0;d<f;++d)(c=l[d]||h[d])&&(p[d]=c);for(;s<i;++s)u[s]=e[s];return new dt(u,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=_);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,u=e[o],s=u.length,c=i[o]=new Array(s),l=0;l<s;++l)(a=u[l])&&(c[l]=a);c.sort(n)}return new dt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=k(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?A:M:"function"==typeof n?e.local?$:S:e.local?N:E)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?T:"function"==typeof n?C:P)(t,n,null==e?"":e)):I(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?L:"function"==typeof n?q:X)(t,n)):this.node()[t]},classed:function(t,n){var e=Y(t+"");if(arguments.length<2){for(var r=j(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?H:n?D:V)(e,n))},text:function(t){return arguments.length?this.each(null==t?U:("function"==typeof t?F:Z)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?W:("function"==typeof t?K:G)(t)):this.node().innerHTML},raise:function(){return this.each(Q)},lower:function(){return this.each(J)},append:function(t){var n="function"==typeof t?t:et(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,e){var r="function"==typeof t?t:et(t),i=null==e?rt:"function"==typeof e?e:n(e);return this.select((function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(it)},clone:function(t){return this.select(t?at:ot)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=ut(t+""),a=o.length;if(!(arguments.length<2)){for(u=n?ct:st,r=0;r<a;++r)this.each(u(o[r],n,e));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,n){return this.each(("function"==typeof n?ft:ht)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const vt=yt;var mt={value:()=>{}};function gt(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new wt(r)}function wt(t){this._=t}function _t(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function xt(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function bt(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=mt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}wt.prototype=gt.prototype={constructor:wt,on:function(t,n){var e,r=this._,i=_t(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<a;)if(e=(t=i[o]).type)r[e]=bt(r[e],t.name,n);else if(null==n)for(e in r)r[e]=bt(r[e],t.name,null);return this}for(;++o<a;)if((e=(t=i[o]).type)&&(e=xt(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new wt(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};const kt=gt;var Mt,At,Et=0,Nt=0,St=0,$t=0,zt=0,Tt=0,Pt="object"==typeof performance&&performance.now?performance:Date,Ct="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function It(){return zt||(Ct(Lt),zt=Pt.now()+Tt)}function Lt(){zt=0}function Xt(){this._call=this._time=this._next=null}function qt(t,n,e){var r=new Xt;return r.restart(t,n,e),r}function Yt(){zt=($t=Pt.now())+Tt,Et=Nt=0;try{!function(){It(),++Et;for(var t,n=Mt;n;)(t=zt-n._time)>=0&&n._call.call(void 0,t),n=n._next;--Et}()}finally{Et=0,function(){for(var t,n,e=Mt,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Mt=n);At=t,Ot(r)}(),zt=0}}function jt(){var t=Pt.now(),n=t-$t;n>1e3&&(Tt-=n,$t=t)}function Ot(t){Et||(Nt&&(Nt=clearTimeout(Nt)),t-zt>24?(t<1/0&&(Nt=setTimeout(Yt,t-Pt.now()-Tt)),St&&(St=clearInterval(St))):(St||($t=Pt.now(),St=setInterval(jt,1e3)),Et=1,Ct(Yt)))}function Rt(t,n,e){var r=new Xt;return n=null==n?0:+n,r.restart((e=>{r.stop(),t(e+n)}),n,e),r}Xt.prototype=qt.prototype={constructor:Xt,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?It():+e)+(null==n?0:+n),this._next||At===this||(At?At._next=this:Mt=this,At=this),this._call=t,this._time=e,Ot()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ot())}};var Bt=kt("start","end","cancel","interrupt"),Dt=[];function Vt(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(s){var c,l,h,f;if(1!==e.state)return u();for(c in i)if((f=i[c]).name===e.name){if(3===f.state)return Rt(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<n&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(Rt((function(){3===e.state&&(e.state=4,e.timer.restart(a,e.delay,e.time),a(s))})),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,r=new Array(h=e.tween.length),c=0,l=-1;c<h;++c)(f=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(r[++l]=f);r.length=l+1}}function a(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){for(var r in e.state=6,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=qt((function(t){e.state=1,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)}),0,e.time)}(t,e,{name:n,index:r,group:i,on:Bt,tween:Dt,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Ht(t,n){var e=Zt(t,n);if(e.state>0)throw new Error("too late; already scheduled");return e}function Ut(t,n){var e=Zt(t,n);if(e.state>3)throw new Error("too late; already running");return e}function Zt(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Ft(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>2&&e.state<5,e.state=6,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}function Wt(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var Gt,Kt=180/Math.PI,Qt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Jt(t,n,e,r,i,o){var a,u,s;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(s=t*e+n*r)&&(e-=t*s,r-=n*s),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,s/=u),t*r<n*e&&(t=-t,n=-n,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Kt,skewX:Math.atan(s)*Kt,scaleX:a,scaleY:u}}function tn(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],s=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var s=a.push("translate(",null,n,null,e);u.push({i:s-4,x:Wt(t,i)},{i:s-2,x:Wt(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,u,s),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:Wt(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,u,s),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:Wt(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,u,s),function(t,n,e,r,o,a){if(t!==e||n!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:Wt(t,e)},{i:u-2,x:Wt(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,s),o=a=null,function(t){for(var n,e=-1,r=s.length;++e<r;)u[(n=s[e]).i]=n.x(t);return u.join("")}}}var nn=tn((function(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Qt:Jt(n.a,n.b,n.c,n.d,n.e,n.f)}),"px, ","px)","deg)"),en=tn((function(t){return null==t?Qt:(Gt||(Gt=document.createElementNS("http://www.w3.org/2000/svg","g")),Gt.setAttribute("transform",t),(t=Gt.transform.baseVal.consolidate())?Jt((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Qt)}),", ",")",")");function rn(t,n){var e,r;return function(){var i=Ut(this,t),o=i.tween;if(o!==e)for(var a=0,u=(r=e=o).length;a<u;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}function on(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=Ut(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:n,value:e},s=0,c=i.length;s<c;++s)if(i[s].name===n){i[s]=u;break}s===c&&i.push(u)}o.tween=i}}function an(t,n,e){var r=t._id;return t.each((function(){var t=Ut(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return Zt(t,r).value[n]}}function un(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function sn(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function cn(){}var ln=.7,hn=1/ln,fn="\\s*([+-]?\\d+)\\s*",pn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",dn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yn=/^#([0-9a-f]{3,8})$/,vn=new RegExp("^rgb\\("+[fn,fn,fn]+"\\)$"),mn=new RegExp("^rgb\\("+[dn,dn,dn]+"\\)$"),gn=new RegExp("^rgba\\("+[fn,fn,fn,pn]+"\\)$"),wn=new RegExp("^rgba\\("+[dn,dn,dn,pn]+"\\)$"),_n=new RegExp("^hsl\\("+[pn,dn,dn]+"\\)$"),xn=new RegExp("^hsla\\("+[pn,dn,dn,pn]+"\\)$"),bn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function kn(){return this.rgb().formatHex()}function Mn(){return this.rgb().formatRgb()}function An(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=yn.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?En(n):3===e?new zn(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?Nn(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?Nn(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=vn.exec(t))?new zn(n[1],n[2],n[3],1):(n=mn.exec(t))?new zn(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=gn.exec(t))?Nn(n[1],n[2],n[3],n[4]):(n=wn.exec(t))?Nn(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=_n.exec(t))?In(n[1],n[2]/100,n[3]/100,1):(n=xn.exec(t))?In(n[1],n[2]/100,n[3]/100,n[4]):bn.hasOwnProperty(t)?En(bn[t]):"transparent"===t?new zn(NaN,NaN,NaN,0):null}function En(t){return new zn(t>>16&255,t>>8&255,255&t,1)}function Nn(t,n,e,r){return r<=0&&(t=n=e=NaN),new zn(t,n,e,r)}function Sn(t){return t instanceof cn||(t=An(t)),t?new zn((t=t.rgb()).r,t.g,t.b,t.opacity):new zn}function $n(t,n,e,r){return 1===arguments.length?Sn(t):new zn(t,n,e,null==r?1:r)}function zn(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Tn(){return"#"+Cn(this.r)+Cn(this.g)+Cn(this.b)}function Pn(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Cn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function In(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Xn(t,n,e,r)}function Ln(t){if(t instanceof Xn)return new Xn(t.h,t.s,t.l,t.opacity);if(t instanceof cn||(t=An(t)),!t)return new Xn;if(t instanceof Xn)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,u=o-i,s=(o+i)/2;return u?(a=n===o?(e-r)/u+6*(e<r):e===o?(r-n)/u+2:(n-e)/u+4,u/=s<.5?o+i:2-o-i,a*=60):u=s>0&&s<1?0:a,new Xn(a,u,s,t.opacity)}function Xn(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function qn(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function Yn(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}un(cn,An,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:kn,formatHex:kn,formatHsl:function(){return Ln(this).formatHsl()},formatRgb:Mn,toString:Mn}),un(zn,$n,sn(cn,{brighter:function(t){return t=null==t?hn:Math.pow(hn,t),new zn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?ln:Math.pow(ln,t),new zn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tn,formatHex:Tn,formatRgb:Pn,toString:Pn})),un(Xn,(function(t,n,e,r){return 1===arguments.length?Ln(t):new Xn(t,n,e,null==r?1:r)}),sn(cn,{brighter:function(t){return t=null==t?hn:Math.pow(hn,t),new Xn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?ln:Math.pow(ln,t),new Xn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new zn(qn(t>=240?t-240:t+120,i,r),qn(t,i,r),qn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const jn=t=>()=>t;function On(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):jn(isNaN(t)?n:t)}const Rn=function t(n){var e=function(t){return 1==(t=+t)?On:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):jn(isNaN(n)?e:n)}}(n);function r(t,n){var r=e((t=$n(t)).r,(n=$n(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=On(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function Bn(t){return function(n){var e,r,i=n.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=$n(n[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=t(o),a=t(a),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=u(t),r+""}}}Bn((function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,u=r<n-1?t[r+2]:2*o-i;return Yn((e-r/n)*n,a,i,o,u)}})),Bn((function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],a=t[(r+1)%n],u=t[(r+2)%n];return Yn((e-r/n)*n,i,o,a,u)}}));var Dn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vn=new RegExp(Dn.source,"g");function Hn(t,n){var e,r,i,o=Dn.lastIndex=Vn.lastIndex=0,a=-1,u=[],s=[];for(t+="",n+="";(e=Dn.exec(t))&&(r=Vn.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:Wt(e,r)})),o=Vn.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?function(t){return function(n){return t(n)+""}}(s[0].x):function(t){return function(){return t}}(n):(n=s.length,function(t){for(var e,r=0;r<n;++r)u[(e=s[r]).i]=e.x(t);return u.join("")})}function Un(t,n){var e;return("number"==typeof n?Wt:n instanceof An?Rn:(e=An(n))?(n=e,Rn):Hn)(t,n)}function Zn(t){return function(){this.removeAttribute(t)}}function Fn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wn(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=n(r=a,e)}}function Gn(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=n(r=a,e)}}function Kn(t,n,e){var r,i,o;return function(){var a,u,s=e(this);if(null!=s)return(a=this.getAttribute(t))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,s));this.removeAttribute(t)}}function Qn(t,n,e){var r,i,o;return function(){var a,u,s=e(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,s));this.removeAttributeNS(t.space,t.local)}}function Jn(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function te(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function ne(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&te(t,i)),e}return i._value=n,i}function ee(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&Jn(t,i)),e}return i._value=n,i}function re(t,n){return function(){Ht(this,t).delay=+n.apply(this,arguments)}}function ie(t,n){return n=+n,function(){Ht(this,t).delay=n}}function oe(t,n){return function(){Ut(this,t).duration=+n.apply(this,arguments)}}function ae(t,n){return n=+n,function(){Ut(this,t).duration=n}}function ue(t,n){if("function"!=typeof n)throw new Error;return function(){Ut(this,t).ease=n}}function se(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?Ht:Ut;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(n,e),a.on=i}}var ce=vt.prototype.constructor;function le(t){return function(){this.style.removeProperty(t)}}function he(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function fe(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&he(t,o,e)),r}return o._value=n,o}function pe(t){return function(n){this.textContent=t.call(this,n)}}function de(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&pe(r)),n}return r._value=t,r}var ye=0;function ve(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function me(){return++ye}var ge=vt.prototype;ve.prototype=function(t){return vt().transition(t)}.prototype={constructor:ve,select:function(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=n(t));for(var i=this._groups,o=i.length,a=new Array(o),u=0;u<o;++u)for(var s,c,l=i[u],h=l.length,f=a[u]=new Array(h),p=0;p<h;++p)(s=l[p])&&(c=t.call(s,s.__data__,p,l))&&("__data__"in s&&(c.__data__=s.__data__),f[p]=c,Vt(f[p],e,r,p,f,Zt(s,r)));return new ve(a,this._parents,e,r)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=a(t));for(var r=this._groups,i=r.length,o=[],u=[],s=0;s<i;++s)for(var c,l=r[s],h=l.length,f=0;f<h;++f)if(c=l[f]){for(var p,d=t.call(c,c.__data__,f,l),y=Zt(c,e),v=0,m=d.length;v<m;++v)(p=d[v])&&Vt(p,n,e,v,d,y);o.push(d),u.push(c)}return new ve(o,u,n,e)},selectChild:ge.selectChild,selectChildren:ge.selectChildren,filter:function(t){"function"!=typeof t&&(t=u(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&c.push(o);return new ve(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=n[u],l=e[u],h=c.length,f=a[u]=new Array(h),p=0;p<h;++p)(s=c[p]||l[p])&&(f[p]=s);for(;u<r;++u)a[u]=n[u];return new ve(a,this._parents,this._name,this._id)},selection:function(){return new ce(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=me(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)if(a=u[c]){var l=Zt(a,n);Vt(a,t,e,c,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ve(r,this._parents,t,e)},call:ge.call,nodes:ge.nodes,node:ge.node,size:ge.size,empty:ge.empty,each:ge.each,on:function(t,n){var e=this._id;return arguments.length<2?Zt(this.node(),e).on.on(t):this.each(se(e,t,n))},attr:function(t,n){var e=k(t),r="transform"===e?en:Un;return this.attrTween(t,"function"==typeof n?(e.local?Qn:Kn)(e,r,an(this,"attr."+t,n)):null==n?(e.local?Fn:Zn)(e):(e.local?Gn:Wn)(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=k(t);return this.tween(e,(r.local?ne:ee)(r,n))},style:function(t,n,e){var r="transform"==(t+="")?nn:Un;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=I(this,t),a=(this.style.removeProperty(t),I(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,le(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var a=I(this,t),u=e(this),s=u+"";return null==u&&(this.style.removeProperty(t),s=u=I(this,t)),a===s?null:a===r&&s===i?o:(i=s,o=n(r=a,u))}}(t,r,an(this,"style."+t,n))).each(function(t,n){var e,r,i,o,a="style."+n,u="end."+a;return function(){var s=Ut(this,t),c=s.on,l=null==s.value[a]?o||(o=le(n)):void 0;c===e&&i===l||(r=(e=c).copy()).on(u,i=l),s.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var a=I(this,t);return a===o?null:a===r?i:i=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,fe(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(an(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,de(t))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Zt(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?rn:on)(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?re:ie)(n,t)):Zt(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?oe:ae)(n,t)):Zt(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(ue(n,t)):Zt(this.node(),n).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;Ut(this,t).ease=e}}(this._id,t))},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(o,a){var u={value:a},s={value:function(){0==--i&&o()}};e.each((function(){var e=Ut(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(u),n._.interrupt.push(u),n._.end.push(s)),e.on=n})),0===i&&o()}))},[Symbol.iterator]:ge[Symbol.iterator]};var we={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function _e(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}vt.prototype.interrupt=function(t){return this.each((function(){Ft(this,t)}))},vt.prototype.transition=function(t){var n,e;t instanceof ve?(n=t._id,t=t._name):(n=me(),(e=we).time=It(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)(a=u[c])&&Vt(a,t,n,c,u,e||_e(a,n));return new ve(r,this._parents,t,n)};const{abs:xe,max:be,min:ke}=Math;function Me(t){return{type:t}}function Ae(t){return"string"==typeof t?new dt([[document.querySelector(t)]],[document.documentElement]):new dt([[t]],pt)}function Ee(t,n){if(t=function(t){let n;for(;n=t.sourceEvent;)t=n;return t}(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}["w","e"].map(Me),["n","s"].map(Me),["n","w","e","s","nw","ne","sw","se"].map(Me);const Ne={passive:!1},Se={capture:!0,passive:!1};function $e(t){t.stopImmediatePropagation()}function ze(t){t.preventDefault(),t.stopImmediatePropagation()}function Te(t){var n=t.document.documentElement,e=Ae(t).on("dragstart.drag",ze,Se);"onselectstart"in n?e.on("selectstart.drag",ze,Se):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Pe(t,n){var e=t.document.documentElement,r=Ae(t).on("dragstart.drag",null);n&&(r.on("click.drag",ze,Se),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const Ce=t=>()=>t;function Ie(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:o,x:a,y:u,dx:s,dy:c,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:l}})}function Le(t){return!t.ctrlKey&&!t.button}function Xe(){return this.parentNode}function qe(t,n){return null==n?{x:t.x,y:t.y}:n}function Ye(){return navigator.maxTouchPoints||"ontouchstart"in this}function je(){var t,n,e,r,i=Le,o=Xe,a=qe,u=Ye,s={},c=kt("start","drag","end"),l=0,h=0;function f(t){t.on("mousedown.drag",p).filter(u).on("touchstart.drag",v).on("touchmove.drag",m,Ne).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(a,u){if(!r&&i.call(this,a,u)){var s=w(this,o.call(this,a,u),a,u,"mouse");s&&(Ae(a.view).on("mousemove.drag",d,Se).on("mouseup.drag",y,Se),Te(a.view),$e(a),e=!1,t=a.clientX,n=a.clientY,s("start",a))}}function d(r){if(ze(r),!e){var i=r.clientX-t,o=r.clientY-n;e=i*i+o*o>h}s.mouse("drag",r)}function y(t){Ae(t.view).on("mousemove.drag mouseup.drag",null),Pe(t.view,e),ze(t),s.mouse("end",t)}function v(t,n){if(i.call(this,t,n)){var e,r,a=t.changedTouches,u=o.call(this,t,n),s=a.length;for(e=0;e<s;++e)(r=w(this,u,t,n,a[e].identifier,a[e]))&&($e(t),r("start",t,a[e]))}}function m(t){var n,e,r=t.changedTouches,i=r.length;for(n=0;n<i;++n)(e=s[r[n].identifier])&&(ze(t),e("drag",t,r[n]))}function g(t){var n,e,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),n=0;n<o;++n)(e=s[i[n].identifier])&&($e(t),e("end",t,i[n]))}function w(t,n,e,r,i,o){var u,h,p,d=c.copy(),y=Ee(o||e,n);if(null!=(p=a.call(t,new Ie("beforestart",{sourceEvent:e,target:f,identifier:i,active:l,x:y[0],y:y[1],dx:0,dy:0,dispatch:d}),r)))return u=p.x-y[0]||0,h=p.y-y[1]||0,function e(o,a,c){var v,m=y;switch(o){case"start":s[i]=e,v=l++;break;case"end":delete s[i],--l;case"drag":y=Ee(c||a,n),v=l}d.call(o,t,new Ie(o,{sourceEvent:a,subject:p,target:f,identifier:i,active:v,x:y[0]+u,y:y[1]+h,dx:y[0]-m[0],dy:y[1]-m[1],dispatch:d}),r)}}return f.filter=function(t){return arguments.length?(i="function"==typeof t?t:Ce(!!t),f):i},f.container=function(t){return arguments.length?(o="function"==typeof t?t:Ce(t),f):o},f.subject=function(t){return arguments.length?(a="function"==typeof t?t:Ce(t),f):a},f.touchable=function(t){return arguments.length?(u="function"==typeof t?t:Ce(!!t),f):u},f.on=function(){var t=c.on.apply(c,arguments);return t===c?f:t},f.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,f):Math.sqrt(h)},f}function Oe(t){return"string"==typeof t?new dt([document.querySelectorAll(t)],[document.documentElement]):new dt([i(t)],pt)}function Re(t){return((t=Math.exp(t))+1/t)/2}Ie.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};const Be=function t(n,e,r){function i(t,i){var o,a,u=t[0],s=t[1],c=t[2],l=i[0],h=i[1],f=i[2],p=l-u,d=h-s,y=p*p+d*d;if(y<1e-12)a=Math.log(f/c)/n,o=function(t){return[u+t*p,s+t*d,c*Math.exp(n*t*a)]};else{var v=Math.sqrt(y),m=(f*f-c*c+r*y)/(2*c*e*v),g=(f*f-c*c-r*y)/(2*f*e*v),w=Math.log(Math.sqrt(m*m+1)-m),_=Math.log(Math.sqrt(g*g+1)-g);a=(_-w)/n,o=function(t){var r,i=t*a,o=Re(w),l=c/(e*v)*(o*(r=n*i+w,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(w));return[u+l*p,s+l*d,c*o/Re(n*i+w)]}}return o.duration=1e3*a*n/Math.SQRT2,o}return i.rho=function(n){var e=Math.max(.001,+n),r=e*e;return t(e,r,r*r)},i}(Math.SQRT2,2,4),De=t=>()=>t;function Ve(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function He(t,n,e){this.k=t,this.x=n,this.y=e}He.prototype={constructor:He,scale:function(t){return 1===t?this:new He(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new He(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ue=new He(1,0,0);function Ze(t){t.stopImmediatePropagation()}function Fe(t){t.preventDefault(),t.stopImmediatePropagation()}function We(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function Ge(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Ke(){return this.__zoom||Ue}function Qe(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Je(){return navigator.maxTouchPoints||"ontouchstart"in this}function tr(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}He.prototype;const nr=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=16*Math.random()|0;return("x"==t?n:3&n|8).toString(16)}))},er='<svg t="1634023350064" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1661" width="32" height="32"><path d="M522.666667 96l8.533333 0.042667a910.08 910.08 0 0 1 91.562667 5.333333l14.549333 1.706667 15.402667 2.133333 15.125333 2.410667 7.573333 1.322666 14.890667 2.837334c125.205333 25.322667 212.928 79.488 216.256 150.677333l0.106667 4.202667v448c0 73.258667-88.704 129.066667-216.362667 154.88l-14.890667 2.837333-7.573333 1.322667-15.125333 2.389333-15.402667 2.133333c-36.266667 4.650667-74.773333 7.104-114.645333 7.104-39.872 0-78.378667-2.453333-114.645334-7.104l-15.402666-2.133333-15.125334-2.389333c-137.088-23.189333-235.264-79.488-238.72-154.901334L138.666667 714.666667v-448l0.106666-4.202667c3.328-71.189333 91.050667-125.354667 216.256-150.677333l14.890667-2.837334 7.573333-1.322666 15.125334-2.389334 15.402666-2.133333a892.202667 892.202667 0 0 1 97.642667-6.954667L522.666667 96z m145.173333 543.04l-15.125333 2.389333-15.402667 2.133334c-36.266667 4.650667-74.773333 7.104-114.645333 7.104-39.872 0-78.378667-2.453333-114.645334-7.104l-15.402666-2.133334-15.125334-2.389333c-71.488-12.096-132.416-33.194667-174.826666-61.312V714.666667c0 20.949333 24.170667 42.773333 65.066666 61.184l9.749334 4.181333c15.04 6.186667 32 11.925333 50.602666 17.024l12.650667 3.306667c12.864 3.2 26.453333 6.144 40.597333 8.704l14.378667 2.453333 14.741333 2.197333c9.962667 1.386667 20.16 2.602667 30.570667 3.626667l15.765333 1.408 16.064 1.109333 16.362667 0.810667a845.994667 845.994667 0 0 0 66.901333 0l16.362667-0.810667 16.064-1.109333 15.786667-1.408c10.389333-1.024 20.586667-2.24 30.549333-3.626667l14.741333-2.197333 14.378667-2.453333c14.165333-2.56 27.733333-5.482667 40.597333-8.704l12.650667-3.306667c18.602667-5.12 35.562667-10.837333 50.602667-17.024l9.749333-4.181333c39.317333-17.706667 63.189333-38.549333 64.96-58.773334l0.106667-2.410666v-136.96c-42.389333 28.138667-103.317333 49.237333-174.826667 61.333333zM842.666667 364.373333c-40.298667 26.730667-97.28 47.104-164.202667 59.456l-10.666667 1.877334-15.104 2.389333-15.402666 2.133333c-36.266667 4.650667-74.773333 7.104-114.645334 7.104-34.176 0-67.349333-1.792-98.986666-5.248l-15.658667-1.856-15.402667-2.133333-15.125333-2.389333c-71.488-12.096-132.416-33.194667-174.826667-61.312V480c0 20.949333 24.170667 42.773333 65.066667 61.184l9.749333 4.181333c15.04 6.186667 32 11.925333 50.602667 17.024l12.650667 3.306667c12.864 3.2 26.453333 6.144 40.597333 8.704l14.378667 2.453333 14.741333 2.197334c9.962667 1.386667 20.16 2.602667 30.570667 3.626666l15.765333 1.408 16.064 1.109334 16.362667 0.810666a845.994667 845.994667 0 0 0 66.901333 0l16.362667-0.810666 16.064-1.109334 15.786666-1.408c10.389333-1.024 20.586667-2.24 30.549334-3.626666l14.741333-2.197334 14.378667-2.453333c14.165333-2.56 27.733333-5.482667 40.597333-8.704l12.650667-3.306667c18.602667-5.12 35.562667-10.837333 50.602666-17.024l9.749334-4.181333c39.317333-17.706667 63.189333-38.549333 64.96-58.773333l0.106666-2.410667v-115.626667zM522.666667 160l-8.448 0.042667-12.586667 0.213333-12.416 0.405333-16.362667 0.810667-16.064 1.109333-15.786666 1.408c-6.933333 0.682667-13.76 1.450667-20.501334 2.304l-10.026666 1.322667-14.762667 2.197333-14.378667 2.453334c-10.624 1.92-20.906667 4.053333-30.826666 6.336l-9.770667 2.346666-12.650667 3.328c-15.488 4.266667-29.866667 8.96-42.922666 13.973334l-7.68 3.050666-9.749334 4.181334c-40.896 18.410667-65.066667 40.234667-65.066666 61.184 0 20.053333 22.122667 40.874667 59.84 58.773333l5.226666 2.410667 9.749334 4.181333c12.522667 5.162667 26.389333 10.005333 41.450666 14.421333l9.173334 2.602667 12.629333 3.306667c9.642667 2.410667 19.690667 4.650667 30.08 6.72l10.517333 1.984 14.378667 2.453333 14.741333 2.197333c6.634667 0.938667 13.376 1.770667 20.224 2.56l10.346667 1.066667 15.765333 1.408 16.064 1.109333 16.362667 0.810667a845.994667 845.994667 0 0 0 55.872 0.362667l11.029333-0.362667 16.362667-0.810667 16.064-1.109333 15.786667-1.408c6.933333-0.682667 13.76-1.450667 20.501333-2.304l10.026667-1.322667 14.762666-2.197333 14.378667-2.453333c10.624-1.92 20.906667-4.053333 30.826667-6.336l9.770666-2.346667 12.650667-3.328c15.488-4.266667 29.866667-8.96 42.922667-13.973333l7.68-3.050667 9.749333-4.181333c40.896-18.410667 65.066667-40.234667 65.066667-61.184 0-20.053333-22.122667-40.874667-59.84-58.773334l-5.226667-2.410666-9.749333-4.181334a424.469333 424.469333 0 0 0-41.450667-14.421333l-9.173333-2.602667-12.629334-3.306666a623.658667 623.658667 0 0 0-30.08-6.72l-10.517333-1.984-14.378667-2.453334-14.741333-2.197333a765.994667 765.994667 0 0 0-20.224-2.56l-10.346667-1.066667-15.765333-1.408-16.064-1.109333-16.362667-0.810667c-7.317333-0.298667-14.72-0.490667-22.186666-0.597333L522.666667 160z" fill="#1677FF" p-id="1662"></path></svg>';var rr=e(379),ir=e.n(rr),or=e(795),ar=e.n(or),ur=e(569),sr=e.n(ur),cr=e(565),lr=e.n(cr),hr=e(216),fr=e.n(hr),pr=e(589),dr=e.n(pr),yr=e(342),vr={};vr.styleTagTransform=dr(),vr.setAttributes=lr(),vr.insert=sr().bind(null,"head"),vr.domAPI=ar(),vr.insertStyleElement=fr(),ir()(yr.Z,vr),yr.Z&&yr.Z.locals&&yr.Z.locals;let mr,gr,wr,_r=!0;const xr=25;let br,kr,Mr=0,Ar=0,Er=0,Nr="line",Sr="circle",$r=0,zr=0,Tr=[],Pr=[];const Cr=je().on("start",(function(t,n){n.dx=t.sourceEvent.x,n.dy=t.sourceEvent.y})).on("drag",(function(t,n){n.xp=n.x-(n.dx-t.sourceEvent.x),n.yp=n.y-(n.dy-t.sourceEvent.y),Pr.forEach((t=>{const e=t.source===n.id?t.startIndex:t.endIndex,r=Math.cos(Math.PI/180*e*90)*xr,i=Math.sin(Math.PI/180*e*90)*xr;t.source===n.id?(t.x1=n.xp+r,t.y1=n.yp+i):t.target===n.id&&(t.x2=n.xp+r,t.y2=n.yp+i)})),qr({data:Pr}),Ae(this).attr("transform",(()=>`translate(${n.xp}, ${n.yp})`))})).on("end",(function(t,n){n.x=n.xp||t.sourceEvent.x,n.y=n.yp||t.sourceEvent.y}));function Ir(t,n){br&&br(n),Oe(".unit-dis").attr("class","unit-dis"),Oe(".connect-fixed-line").attr("data-selected",""),Ae(this).attr("class","unit-dis selected")}function Lr(t,n){Oe(".unit-dis").attr("class","unit-dis"),Oe(".connect-fixed-line").attr("data-selected",""),Ae(this).attr("data-selected",!0),kr&&kr(n)}function Xr(t={}){Oe(".unit-dis").remove(),mr=gr.selectAll("g").data(t.data).enter().append("g").attr("id",(t=>t.id)).attr("class","unit-dis").call(Cr).on("click",Ir).attr("transform",(t=>_r?"translate(0, 0)":`translate(${t.x}, ${t.y})`)),_r&&mr.transition().duration(750).delay((function(t,n){return 10*n})).attr("transform",(t=>`translate(${t.x}, ${t.y})`)),function(){mr.append("g").attr("class","delete-circle").attr("title","delete").attr("transform","translate(25, -30)").on("click",Yr).html('<svg t="1634267294175" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2117" width="24" height="24"><path d="M512 832c-176.448 0-320-143.552-320-320S335.552 192 512 192s320 143.552 320 320-143.552 320-320 320m0-704C300.256 128 128 300.256 128 512s172.256 384 384 384 384-172.256 384-384S723.744 128 512 128" p-id="2118" fill="#d81e06"></path><path d="M649.824 361.376a31.968 31.968 0 0 0-45.248 0L505.6 460.352l-98.976-98.976a31.968 31.968 0 1 0-45.248 45.248l98.976 98.976-98.976 98.976a32 32 0 0 0 45.248 45.248l98.976-98.976 98.976 98.976a31.904 31.904 0 0 0 45.248 0 31.968 31.968 0 0 0 0-45.248L550.848 505.6l98.976-98.976a31.968 31.968 0 0 0 0-45.248" p-id="2119" fill="#d81e06"></path></svg>');const t=je().on("start",(function(t,n){n.dx=t.sourceEvent.layerX-5*Math.cos(Math.PI/180*n.index*90),n.dy=t.sourceEvent.layerY-5*Math.sin(Math.PI/180*n.index*90)})).on("drag",(function(t,n){const e=0===Er?1:Er;n.x1=(n.dx-Mr)/e,n.y1=(n.dy-Ar)/e,n.x2=(t.sourceEvent.layerX-Mr)/e,n.y2=(t.sourceEvent.layerY-Ar)/e;let r=`M${n.x1},${n.y1} ${n.x2},${n.y2}`;if("path"===Nr)switch(n.index){case 0:r=`M${n.x1},${n.y1} C${(n.x1+n.x2)/2},${n.y1} ${(n.x2+n.x1)/2},${n.y2}  ${n.x2},${n.y2}`;break;case 1:case 3:r=`M${n.x1},${n.y1} C${n.x1},${n.y2} ${n.x2},${n.y1}  ${n.x2},${n.y2}`;break;case 2:r=`M${n.x1},${n.y1} C${(n.x2+n.x1)/2},${n.y1} ${(n.x1+n.x2)/2},${n.y2}  ${n.x2},${n.y2}`;break;default:r=`M${n.x1},${n.y1} ${n.x2},${n.y2}`}Ae(".connect-line").attr("class","connect-line show").attr("d",r)})).on("end",(function(t,n){Ae(".connect-line").attr("class","connect-line");const e=document.querySelector(".small-circle.active");e&&(Pr.push({source:this.parentNode.getAttribute("id"),target:e.parentNode.getAttribute("id"),startIndex:n.index,endIndex:Number(e.dataset.index),x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2}),qr({data:Pr}))}));"rect"===Sr?mr.append("rect").attr("fill","#fff").attr("class","main-circle").attr("stroke","#227AE6").attr("x",-25).attr("y",-25).attr("rx",5).attr("ry",5).attr("height",50).attr("width",50):mr.append("circle").attr("fill","#fff").attr("class","main-circle").attr("stroke","#227AE6").attr("r",xr);const n=[{x:xr,y:0,index:0},{x:0,y:xr,index:1},{x:-25,y:0,index:2},{x:0,y:-25,index:3}];mr.selectAll(".small-circle").data(n).enter().append("circle").attr("class","small-circle").attr("data-index",(t=>t.index)).attr("cx",(t=>t.x)).attr("cy",(t=>t.y)).attr("r",5).on("mouseenter",(function(t){this.setAttribute("class","small-circle active")})).on("mouseleave",(function(t){this.setAttribute("class","small-circle")})).call(t),mr.append("g").attr("transform","translate(-15, -15)").html(er),mr.append("text").attr("y",45).attr("fill","#111").attr("style","text-anchor: middle;").text((t=>t.text))}()}function qr(t={}){wr.selectAll(".connect-fixed-line").remove();const n=wr.selectAll(".connect-fixed-line").data(t.data).enter().append("path").attr("class",(t=>`start-${t.source} end-${t.target} connect-fixed-line`)).attr("marker-end","url(#arrowEnd)").attr("d",(t=>_r?"M0,0 0,0":`M${t.x1},${t.y1} ${t.x2},${t.y2}`)).attr("data-id",(t=>t.id)).on("click",Lr);_r&&n.transition().duration(750).delay((function(t,n){return 10*n})).attr("d",(t=>`M${t.x1},${t.y1} ${t.x2},${t.y2}`)),_r=!1}function Yr(t,n){Tr=Tr.filter((t=>n.id!==t.id)),Xr({data:Tr}),Pr=Pr.filter((t=>t.source!==n.id&&t.target!==n.id)),qr({data:Pr})}function jr(t={}){const n=Ae(`#${t.id}`).attr("height",800).html(""),e=document.querySelector(`#${t.id}`);$r=e.offsetLeft,zr=e.offsetTop,Nr=t.connectType||"line",Sr=t.nodeType||"circle",function(t={}){const n=t.option.map((t=>({...t,id:nr()}))),e=t.wrap.append("div").attr("class","svg-option-list").selectAll("div").data(n).enter().append("div").attr("draggable","true").attr("class","svg-option-list-li").attr("data-id",((t,n)=>t.id)).on("dragend",(function(n,e){t.add({title:e.title,x:n.layerX,y:n.layerY-100})}));e.append("div").html(er),e.append("div").html((t=>t.title))}({wrap:n,add:Or,option:t.list});const r=n.append("div").append("svg");r.append("rect").attr("width","100%").attr("height",800).attr("fill","url(#diagramPattern)").on("click",(t=>{Oe(".unit-dis").attr("class","unit-dis")})).call(function(){var t,n,e,r=We,i=Ge,o=tr,a=Qe,u=Je,s=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],l=250,h=Be,f=kt("start","zoom","end"),p=500,d=0,y=10;function v(t){t.property("__zoom",Ke).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",A).filter(u).on("touchstart.zoom",E).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(t,n){return(n=Math.max(s[0],Math.min(s[1],n)))===t.k?t:new He(n,t.x,t.y)}function g(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new He(t.k,r,i)}function w(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function _(t,n,e,r){t.on("start.zoom",(function(){x(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,a=x(t,o).event(r),u=i.apply(t,o),s=null==e?w(u):"function"==typeof e?e.apply(t,o):e,c=Math.max(u[1][0]-u[0][0],u[1][1]-u[0][1]),l=t.__zoom,f="function"==typeof n?n.apply(t,o):n,p=h(l.invert(s).concat(c/l.k),f.invert(s).concat(c/f.k));return function(t){if(1===t)t=f;else{var n=p(t),e=c/n[2];t=new He(e,s[0]-n[0]*e,s[1]-n[1]*e)}a.zoom(null,t)}}))}function x(t,n,e){return!e&&t.__zooming||new b(t,n)}function b(t,n){this.that=t,this.args=n,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,n),this.taps=0}function k(t,...n){if(r.apply(this,arguments)){var e=x(this,n).event(t),i=this.__zoom,u=Math.max(s[0],Math.min(s[1],i.k*Math.pow(2,a.apply(this,arguments)))),l=Ee(t);if(e.wheel)e.mouse[0][0]===l[0]&&e.mouse[0][1]===l[1]||(e.mouse[1]=i.invert(e.mouse[0]=l)),clearTimeout(e.wheel);else{if(i.k===u)return;e.mouse=[l,i.invert(l)],Ft(this),e.start()}Fe(t),e.wheel=setTimeout(h,150),e.zoom("mouse",o(g(m(i,u),e.mouse[0],e.mouse[1]),e.extent,c))}function h(){e.wheel=null,e.end()}}function M(t,...n){if(!e&&r.apply(this,arguments)){var i=t.currentTarget,a=x(this,n,!0).event(t),u=Ae(t.view).on("mousemove.zoom",f,!0).on("mouseup.zoom",p,!0),s=Ee(t,i),l=t.clientX,h=t.clientY;Te(t.view),Ze(t),a.mouse=[s,this.__zoom.invert(s)],Ft(this),a.start()}function f(t){if(Fe(t),!a.moved){var n=t.clientX-l,e=t.clientY-h;a.moved=n*n+e*e>d}a.event(t).zoom("mouse",o(g(a.that.__zoom,a.mouse[0]=Ee(t,i),a.mouse[1]),a.extent,c))}function p(t){u.on("mousemove.zoom mouseup.zoom",null),Pe(t.view,a.moved),Fe(t),a.event(t).end()}}function A(t,...n){if(r.apply(this,arguments)){var e=this.__zoom,a=Ee(t.changedTouches?t.changedTouches[0]:t,this),u=e.invert(a),s=e.k*(t.shiftKey?.5:2),h=o(g(m(e,s),a,u),i.apply(this,n),c);Fe(t),l>0?Ae(this).transition().duration(l).call(_,h,a,t):Ae(this).call(v.transform,h,a,t)}}function E(e,...i){if(r.apply(this,arguments)){var o,a,u,s,c=e.touches,l=c.length,h=x(this,i,e.changedTouches.length===l).event(e);for(Ze(e),a=0;a<l;++a)s=[s=Ee(u=c[a],this),this.__zoom.invert(s),u.identifier],h.touch0?h.touch1||h.touch0[2]===s[2]||(h.touch1=s,h.taps=0):(h.touch0=s,o=!0,h.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(h.taps<2&&(n=s[0],t=setTimeout((function(){t=null}),p)),Ft(this),h.start())}}function N(t,...n){if(this.__zooming){var e,r,i,a,u=x(this,n).event(t),s=t.changedTouches,l=s.length;for(Fe(t),e=0;e<l;++e)i=Ee(r=s[e],this),u.touch0&&u.touch0[2]===r.identifier?u.touch0[0]=i:u.touch1&&u.touch1[2]===r.identifier&&(u.touch1[0]=i);if(r=u.that.__zoom,u.touch1){var h=u.touch0[0],f=u.touch0[1],p=u.touch1[0],d=u.touch1[1],y=(y=p[0]-h[0])*y+(y=p[1]-h[1])*y,v=(v=d[0]-f[0])*v+(v=d[1]-f[1])*v;r=m(r,Math.sqrt(y/v)),i=[(h[0]+p[0])/2,(h[1]+p[1])/2],a=[(f[0]+d[0])/2,(f[1]+d[1])/2]}else{if(!u.touch0)return;i=u.touch0[0],a=u.touch0[1]}u.zoom("touch",o(g(r,i,a),u.extent,c))}}function S(t,...r){if(this.__zooming){var i,o,a=x(this,r).event(t),u=t.changedTouches,s=u.length;for(Ze(t),e&&clearTimeout(e),e=setTimeout((function(){e=null}),p),i=0;i<s;++i)o=u[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=Ee(o,this),Math.hypot(n[0]-o[0],n[1]-o[1])<y)){var c=Ae(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return v.transform=function(t,n,e,r){var i=t.selection?t.selection():t;i.property("__zoom",Ke),t!==i?_(t,n,e,r):i.interrupt().each((function(){x(this,arguments).event(r).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()}))},v.scaleBy=function(t,n,e,r){v.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)}),e,r)},v.scaleTo=function(t,n,e,r){v.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,a=null==e?w(t):"function"==typeof e?e.apply(this,arguments):e,u=r.invert(a),s="function"==typeof n?n.apply(this,arguments):n;return o(g(m(r,s),a,u),t,c)}),e,r)},v.translateBy=function(t,n,e,r){v.transform(t,(function(){return o(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),i.apply(this,arguments),c)}),null,r)},v.translateTo=function(t,n,e,r,a){v.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,u=null==r?w(t):"function"==typeof r?r.apply(this,arguments):r;return o(Ue.translate(u[0],u[1]).scale(a.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,c)}),r,a)},b.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var n=Ae(this.that).datum();f.call(t,this.that,new Ve(t,{sourceEvent:this.sourceEvent,target:v,type:t,transform:this.that.__zoom,dispatch:f}),n)}},v.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:De(+t),v):a},v.filter=function(t){return arguments.length?(r="function"==typeof t?t:De(!!t),v):r},v.touchable=function(t){return arguments.length?(u="function"==typeof t?t:De(!!t),v):u},v.extent=function(t){return arguments.length?(i="function"==typeof t?t:De([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),v):i},v.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],v):[s[0],s[1]]},v.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],v):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},v.constrain=function(t){return arguments.length?(o=t,v):o},v.duration=function(t){return arguments.length?(l=+t,v):l},v.interpolate=function(t){return arguments.length?(h=t,v):h},v.on=function(){var t=f.on.apply(f,arguments);return t===f?v:t},v.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,v):Math.sqrt(d)},v.tapDistance=function(t){return arguments.length?(y=+t,v):y},v}().scaleExtent([.1,100]).on("zoom",(function(t){Mr=t.transform.x,Ar=t.transform.y,Er=t.transform.k,i.attr("transform",t.transform)})));const i=r.append("g");wr=i.append("g"),gr=i.append("g"),n.attr("class","nodelayout-wrap"),r.attr("width","100%").attr("height",800),gr.append("path").attr("class","connect-line").attr("marker-end","url(#arrowEnd)"),t.nodes||(t.nodes=[]),t.onNodeClick&&(br=t.onNodeClick),t.onPathClick&&(kr=t.onPathClick);const o={};Tr=t.nodes.map(((t,n)=>(o[t.id]={x:t.x||100*n+200,y:t.y||160},{id:t.id,text:t.title,x:t.x||100*n+200,y:t.y||160}))),Xr({data:Tr}),t.lines&&(Pr=[],t.lines.forEach(((t,n)=>{const e=t.startIndex,r=t.endIndex;Pr.push({id:nr(),source:t.source,target:t.target,startIndex:e,endIndex:r,x1:o[t.source].x+Math.cos(Math.PI/180*e*90)*xr,y1:o[t.source].y+Math.sin(Math.PI/180*e*90)*xr,x2:o[t.target].x+Math.cos(Math.PI/180*r*90)*xr,y2:o[t.target].y+Math.sin(Math.PI/180*r*90)*xr})})),qr({data:Pr}));let a=r.append("defs");a.append("marker").attr("id","arrowEnd").attr("markerUnits","strokeWidth").attr("markerWidth","12").attr("markerHeight","12").attr("viewBox","0 0 12 12").attr("refX","10").attr("refY","6").attr("orient","auto").append("path").attr("d","M2,2 L10,6 L2,10 L6,6 L2,2").attr("class","pathArrow"),a.append("marker").attr("id","arrowStart").attr("markerUnits","strokeWidth").attr("markerWidth","12").attr("markerHeight","12").attr("viewBox","0 0 12 12").attr("refX","0").attr("refY","6").attr("orient","auto").append("path").attr("d","M10,2 L2,6 L10,10 L6,6 L10,2").attr("class","pathArrow");const u=new Array(20);a.append("pattern").attr("id","diagramPattern").attr("x",0).attr("y",0).attr("width",100).attr("height",100).attr("patternUnits","userSpaceOnUse").selectAll("path").data(u).enter().append("path").attr("stroke","#e0e0e0").attr("stroke-width","0.25").attr("dashArray","").attr("d",((t,n)=>0===n?"M0,0.5 L100,0.5 Z":n<10&&n>0?`M0,${10*n}.125 L100,${10*n}.125 Z`:10===n?"M0.5,0 L0.5,100 Z":n>10?`M${10*(n-10)}.125,0 L${10*(n-10)}.125,100 Z`:void 0))}function Or(t={}){const n=t.x||1e3*Math.random(),e=t.y||600*Math.random()+200,r=0===Er?1:Er;Tr.push({id:nr(),text:t.title||t+(Tr.length+1),x:(n-Mr)/r-$r,y:(e-Ar)/r-zr}),Xr({data:Tr})}})(),r})()}));